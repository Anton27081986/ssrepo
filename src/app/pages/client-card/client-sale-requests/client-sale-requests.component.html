<ss-card padding="0" class="container">
	<div class="header">
		<a *ngIf="(sales$ | async)?.linkToModule; else noLink" [href]="(sales$ | async)?.linkToModule" target="_blank">
			<ss-headline class="title" size="h6">Заявки на продажу</ss-headline>
		</a>
		<ng-template #noLink>
			<ss-headline class="title" size="h6">Заявки на продажу</ss-headline>
		</ng-template>
		<ss-icon *ngIf="!isFiltersVisible" class="filter-button" height="18" width="18" name="filter" (click)="toggleFilters()"></ss-icon>
	</div>
	<div [loader]="tableState === TableState.Loading" class="content desktop table-with-filters">
		<div class="table">
			<div class="table-container" *ngIf="tableState === TableState.Full || tableState === TableState.Loading">
				<ss-table
					[head]="[
						{title: 'Код', field: 'code'},
						{title: 'Контрагент', field: 'contractor'},
						{title: 'Дата отгрузки',  field: 'shipDate'},
						{title: 'Дата оплаты',  field: 'paymentDate'},
						{title: 'Статус', field: 'status'}
						]"
					[items]="tableItems">
				</ss-table>
			</div>
			<div class="table-container" *ngIf="tableState === TableState.Empty">
				<ss-empty-placeholder>
					<ss-headline size="h3" class="m-b-15">По вашему запросу ничего не найдено</ss-headline>
					<div class="placeholder-subtitle">
						<ss-text size="3">Попробуйте изменить параметры поиска</ss-text>
					</div>
				</ss-empty-placeholder>
			</div>
		</div>
		<div class="pagination">
			<nz-pagination
				[nzTotal]="total"
				[nzPageIndex]="pageIndex"
				[nzPageSize]="pageSize"
				(nzPageIndexChange)="nzPageIndexChange($event)"
				(nzPageSizeChange)="pageSize = $event"
				[nzResponsive]="true"
				[nzHideOnSinglePage]="true">
			</nz-pagination>
		</div>
	</div>
</ss-card>
<ss-filters *ngIf="isFiltersVisible" [(isFiltersVisible)]="isFiltersVisible" (applyFilter)="getFilteredSales()" [(filters)]="filters"></ss-filters>
