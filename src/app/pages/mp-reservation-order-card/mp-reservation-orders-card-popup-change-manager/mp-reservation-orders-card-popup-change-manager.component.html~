<div class="wrapper" (click)="close()">
    <snab-card
        class="manager"
        [headerRef]="header"
        [bodyRef]="body"
        [footerRef]="footer"
        (click)="$event.stopPropagation()">
    </snab-card>
</div>

<ng-template #header>
    <div class="manager__header">
        <ss-headline size="h6">Персонифицирование за другими менеджером</ss-headline>
        <snab-button
            [type]="ButtonType.Flat"
            [size]="Size.Default"
            [icon]="IconType.ClearLarge"
            [iconPosition]="IconPosition.OnlyIcon"
            (click)="close()">
        </snab-button>
    </div>
</ng-template>

<ng-template #body>
    <form [formGroup]="changeManagerForm" class="manager__body">
        <div class="manager__body__info">
            <div class="manager__body__info__item">
                <snab-text [weight]="TextWeight.Semibold">Менеджер продаж:</snab-text>
                <snab-text>{{ manager?.name }}</snab-text>
            </div>
            <div class="manager__body__info__item">
                <snab-text [weight]="TextWeight.Semibold">ТП:</snab-text>
                <snab-text>{{ tov?.name }}</snab-text>
            </div>
        </div>
		<div class="manager__body__table">
			<ss-table-v2>
				<tr mp-reservation-orders-card-popup-change-manager-tr *ngFor="let item of items" [item]="item"></tr>
			</ss-table-v2>
		</div>
        <ss-search-input
			class="manager__body__manager"
			label="Менеджер по продажам *"
			[error]="changeManagerForm.controls.managerField.touched && changeManagerForm.controls.managerField.errors?.required ? 'Обязательное поле' : undefined"
			(select)="onManagerSelect($event)"
			(click)="changeManagerForm.controls.managerField.setErrors(null)"
			[searchType]="'user'">
		</ss-search-input>
		{{changeManagerForm.controls.managerField.value | json}}
    </form>
</ng-template>

<ng-template #footer>
    <div class="manager__footer">
        <snab-button text="Отмена"
                     [type]="ButtonType.Secondary"
                     [size]="Size.Large"
                     (click)="close()"
        ></snab-button>
        <snab-button text="Персонифицировать" [size]="Size.Large" (click)="changeManager()"></snab-button>
    </div>
</ng-template>
