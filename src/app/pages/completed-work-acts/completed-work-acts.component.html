<div class="header">
	<ss-lib-text
		[type]="TextType.HeadingXs"
		[weight]="TextWeight.Medium"
	>
		Реестр актов выполненных работ </ss-lib-text
	><ss-lib-button
		ss-lib-tooltip
		[tooltipText]="'Скачать инструкцию'"
		[iconPosition]="IconPosition.OnlyIcon"
		[type]="ButtonType.Secondary"
		[size]="ExtraSize.xxs"
		[icon]="IconType.FileUpload02"
		(click)="downloadInstruction()"
	></ss-lib-button>
</div>
<div class="content">
	<ss-lib-table-canvas
		[tableRef]="tableRef"
		[leftFiltersRef]="leftFiltersRef"
		[rightFiltersRef]="rightFiltersRef"
		[paginationRef]="paginationRef ?? null"
	>
	</ss-lib-table-canvas>
</div>

<ng-template #tableRef>
	<ng-container *ngIf="items$ | async as items">
		<ng-container *ngIf="items.length > 0; else empty">
			<app-completed-work-acts-table
				[total]="total"
				[totalItems]="(itemTotal$ | async)!"
				[actsItems]="items"
			></app-completed-work-acts-table>
		</ng-container>
		<ng-template #empty> </ng-template>
	</ng-container>
</ng-template>

<ng-template #rightFiltersRef>
	<!--    <ng-container *ngIf="hasCustomFilters()">-->
	<app-dropdown-columns-settings></app-dropdown-columns-settings>
	<app-filters-trigger-button></app-filters-trigger-button>
	<!--    </ng-container>-->
</ng-template>

<ng-template #leftFiltersRef>
	<ss-lib-form-field label="Период по Дате услуги">
		<ss-lib-datepicker
			fieldCtrl
			[formControl]="calendarControl"
		></ss-lib-datepicker
	></ss-lib-form-field>
	<ss-lib-form-field label="Период по Дате КИСП">
		<ss-lib-datepicker
			fieldCtrl
			[formControl]="calendarControl"
		></ss-lib-datepicker
	></ss-lib-form-field>
	<div class="filter-toggles">
		<div class="filter-toggles__item">
			<ss-lib-toggle></ss-lib-toggle>
			<ss-lib-text
				[type]="TextType.BodySm"
				[weight]="TextWeight.Semibold"
				[color]="Colors.TextBody2"
				>Требуется моя виза
			</ss-lib-text>
		</div>
		<div class="filter-toggles__item">
			<ss-lib-toggle></ss-lib-toggle>
			<ss-lib-text
				[type]="TextType.BodySm"
				[weight]="TextWeight.Semibold"
				[color]="Colors.TextBody2"
				>Показать архивные акты
			</ss-lib-text>
		</div>
	</div>
</ng-template>

<ng-template #paginationRef>
	<ng-container *ngIf="itemTotal$ | async as itemTotal">
		<ss-lib-load-pagination
			*ngIf="itemTotal !== 0"
			[itemCount]="itemTotal"
			[style.width]="'100%'"
			[total]="total"
			[limit]="limit"
			[offsetInput]="(offset$ | async)!"
		>
		</ss-lib-load-pagination>
	</ng-container>
</ng-template>
