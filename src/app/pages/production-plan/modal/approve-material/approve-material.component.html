<ss-lib-modal
	[badgeProps]="{
						icon: IconType.PackagePlus,
						size: ExtraSize.lg,
						shape: Shape.Square
					}"

	[titleHeader]="'Согласование сырья за ' + (data.dataStart | date:'d MMMM y')"
	[descriptionHeader]="'Выберите период согласования сырья и город для выбранных ГП.'"
	[contentRef]="contentRef"
	[actionsRef]="actionRef"
	(closeEmit)="close()"
>
</ss-lib-modal>

<ng-template #contentRef>
	<div class="approve-material">
		<div class="approve-material__date">
			<ss-lib-text [weight]="TextWeight.Medium" [type]="TextType.BodySm">Период согласования</ss-lib-text>

			<ss-lib-form-field
			>
				<ss-lib-datepicker
					fieldCtrl
					[formControl]="startDate"
				/>
			</ss-lib-form-field>

			<ss-lib-form-field
			>
				<ss-lib-datepicker
					fieldCtrl
					[min]="data.dataStart"
					[formControl]="endDate"
				/>
			</ss-lib-form-field>
		</div>
		<div class="approve-material__city">
			<ss-lib-text [color]="Colors.TextBody2" [type]="TextType.BodySm">Город</ss-lib-text>

			<ss-lib-button [justifyContent]="JustifyContent.SpaceBetween" [iconPosition]="IconPosition.End"
						   [icon]="IconType.ChevronDown" [type]="ButtonType.Secondary" [popoverTriggerFor]="list"
						   [text]="'Выберите вариант расчета'"></ss-lib-button>

			<ss-lib-dropdown-list [width]="'535px'" [height]="'274px'" #list>
				<ss-lib-dropdown-item [selected]="item.id === city()?.id"
									  (click)="city.set(item)"
									  [label]="item.name"
									  *ngFor="let item of cities()"
				/>
			</ss-lib-dropdown-list>
		</div>
	</div>
</ng-template>

<ng-template #actionRef>
	<div class="modal-update-raw-materials__actions">
		<ss-lib-button [style.width]="'262px'" [type]="ButtonType.Secondary" (close)="close()"
					   [text]="'Отменить'"></ss-lib-button>
		<ss-lib-button (click)="approveMaterial()" [style.width]="'262px'" [type]="ButtonType.Primary"
					   [text]="'Рассчитать для ' + data.total + ' ГП'"></ss-lib-button>
	</div>
</ng-template>