<ss-lib-right-side-page-popup
	[badgeProps]="{
		icon: IconType.User01,
		size: ExtraSize.lg,
		shape: Shape.Square,
	}"
	[titleHeader]="titleHeader"
	[descriptionHeader]="'Карточка контрагента'"
	[contentRef]="contentRef"
	[tags]="[
		{
			type: TagType.Default,
			text: 'Принят к учёту',
		},
		{
			type: TagType.Dot,
			text: 'Ожидает визы',
			colorConfig: {
				dotColor: Colors.IconWarning,
				textColor: Colors.TextWarningHover,
				borderColor: Colors.BorderWarning,
			},
		},
	]"
	(closeEmit)="close()"
>
</ss-lib-right-side-page-popup>

<ng-template #contentRef>
	<div class="contractor-card">
		<ss-lib-link
			[text]="'Перейти на страницу карточки'"
			[icon]="IconType.LinkExternal01"
			[iconPosition]="IconPosition.End"
			[linkAppearance]="LinkAppearance.Standalone"
			(click)="openCard()"
		></ss-lib-link>

		<app-notification [title]="'Кредитный статус: передано в юр. отдел'" />

		@if (quickViewData()) {
			<ss-lib-accordion>
				<ss-lib-accordion-item [title]="'Официальная информация'">
					@let officialInfo = quickViewData()?.officialInfo;

					<app-info-section>
						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Полное наименование*
							</ss-lib-text>

							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ officialInfo?.fullName || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Краткое наименование*
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ officialInfo?.shortName || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Юридический адрес*
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ officialInfo?.legalAddress || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Наименование на англ.
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ officialInfo?.nameInEnglish || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								ИНН/УНП/БИН*
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ officialInfo?.innUnpBin || '' }}
							</ss-lib-text>
						</app-info-row>
					</app-info-section>
				</ss-lib-accordion-item>
			</ss-lib-accordion>

			<ss-lib-accordion>
				<ss-lib-accordion-item [title]="'Общая информация'">
					@let generalInfo = quickViewData()?.generalInfo;

					<app-info-section>
						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Клиент
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ generalInfo?.client?.name || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Группа*
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ generalInfo?.group || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Категория*
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ generalInfo?.category || '' }}
							</ss-lib-text>
						</app-info-row>
					</app-info-section>

					<app-info-section>
						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Подотрасль
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ generalInfo?.subIndustry || '-' }}
							</ss-lib-text>
						</app-info-row>
					</app-info-section>

					<app-info-section>
						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Страна*
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ generalInfo?.country || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Кредитный статус
							</ss-lib-text>

							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ generalInfo?.creditStatus || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-icon
								label
								[icon]="IconType.Alert"
							/>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Поставщики STOP
							</ss-lib-text>

							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ booleanAnswer(!!generalInfo?.isStop) }}
							</ss-lib-text>
						</app-info-row>
					</app-info-section>
				</ss-lib-accordion-item>
			</ss-lib-accordion>

			<ss-lib-accordion>
				<ss-lib-accordion-item [title]="'Дополнительная информация'">
					@let additionalInfo = quickViewData()?.additionalInfo;

					<app-info-section>
						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Адрес грузополучателя/отправителя*
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ additionalInfo?.receiverAddress || '' }}
							</ss-lib-text>
						</app-info-row>
					</app-info-section>

					<app-info-section>
						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Адрес производства
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ additionalInfo?.productionAddress || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Образец сложного оформления
							</ss-lib-text>

							@if (additionalInfo?.complexDesignSample) {
								<div
									value
									class="file-item"
								>
									<a
										download
										[href]="
											additionalInfo?.complexDesignSample
												?.directUrl || ''
										"
									>
										<img
											ngSrc="assets/images/files/xls-file.svg"
											height="40"
											width="40"
											alt="file"
											class="file-icon"
										/>
									</a>

									<div class="file-info">
										<ss-lib-text
											[type]="TextType.BodyMd"
											[color]="Colors.TextBody"
										>
											{{
												additionalInfo
													?.complexDesignSample
													?.fileName
											}}
										</ss-lib-text>
									</div>
								</div>
							}
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Нюансы оформления
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ additionalInfo?.designNuances || '' }}
							</ss-lib-text>
						</app-info-row>
					</app-info-section>

					<app-info-section>
						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Адрес корреспонденции
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{
									additionalInfo?.correspondenceAddress || ''
								}}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-icon
								label
								[icon]="IconType.CheckCircle"
							/>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								ЭДО
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ additionalInfo?.edo || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-icon
								label
								[icon]="IconType.CheckCircle"
							/>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								ЧЗ
							</ss-lib-text>

							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{
									booleanAnswer(
										!!additionalInfo?.isBlacklisted
									)
								}}
							</ss-lib-text>
						</app-info-row>
					</app-info-section>

					<app-info-section>
						<app-info-row>
							<ss-lib-icon
								label
								[icon]="IconType.CheckCircle"
							/>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Прикладывать сертификаты анализа
							</ss-lib-text>

							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{
									booleanAnswer(
										!!additionalInfo?.requiresCertificateAnalysis
									)
								}}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Сертификаты анализа
							</ss-lib-text>

							<div
								value
								class="files-list"
							>
								@for (
									file of additionalInfo?.certificatesAnalysis;
									track file.id
								) {
									<div class="file-item">
										<a
											download
											[href]="file.directUrl"
										>
											<img
												ngSrc="assets/images/files/xls-file.svg"
												height="40"
												width="40"
												alt="file"
												class="file-icon"
											/>
										</a>

										<div class="file-info">
											<ss-lib-text
												[type]="TextType.BodyMd"
												[color]="Colors.TextBody"
											>
												{{ file.fileName }}
											</ss-lib-text>
										</div>
									</div>
								}
							</div>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Заметки
							</ss-lib-text>

							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ additionalInfo?.edo || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Торговые площадки (им)
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ additionalInfo?.tradingPlatforms || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Количество работников
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ additionalInfo?.totalEmployees || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Кол-во работников по клиенту
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ additionalInfo?.employeesByClient || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								E-mail
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ additionalInfo?.email || '' }}
							</ss-lib-text>
						</app-info-row>
					</app-info-section>

					<app-info-section>
						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Сайт
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ additionalInfo?.website || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Факс
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ additionalInfo?.fax || '' }}
							</ss-lib-text>
						</app-info-row>

						<app-info-row>
							<ss-lib-text
								label
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody4"
							>
								Телефон
							</ss-lib-text>
							<ss-lib-text
								value
								[type]="TextType.BodyMd"
								[color]="Colors.TextBody"
							>
								{{ additionalInfo?.phone || '' }}
							</ss-lib-text>
						</app-info-row>
					</app-info-section>
				</ss-lib-accordion-item>
			</ss-lib-accordion>
		}
	</div>
</ng-template>
