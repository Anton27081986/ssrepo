<div class="add-modal">
  <div>
    <form nz-form [formGroup]="addVictory" nzLayout="vertical" class="form">

      <nz-form-item>
        <nz-form-control nzWarningTip="Введите достижение">
          <nz-form-label class="field-tile" [nzSpan]="6">Описание:</nz-form-label>
          <div class="textarea m-b-18">
            <textarea nz-input formControlName="comment" placeholder="Поделитесь своим достижением" [nzAutosize]="{ minRows: 4, maxRows: 7 }"></textarea>
            <div class="icon-bg attach" *ngIf="false">
              <span class="attach-icon icon" nz-icon [nzType]="'ss:attach'"></span>
            </div>
          </div>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item class="m-t-2">
        <nz-form-label class="field-tile" [nzSpan]="8">Совместная победа:</nz-form-label>
        <nz-form-control>
          <nz-select
            nzShowSearch
            nzServerSearch
            nzPlaceHolder="Выберите ваших коллег из списка или введите фамилию"
            [(ngModel)]="selectedUser"
            [nzAllowClear]="true"
            [nzShowArrow]="true"
            (ngModelChange)="onUserChange()"
            (nzOnSearch)="searchUsers($event)"
            [ngModelOptions]="{ standalone: true }"
          >
            <nz-option *ngFor="let user of listColleague" [nzLabel]="user.name" [nzValue]="user.id"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <div *ngIf="partyWinSelectedTags.length>1">
        <div class="tag-selected-name">
          <ng-container *ngFor="let party of partyWinSelectedTags; index as i">
            <div class="item-tag">
              <span>{{ party?.name }}</span>
              <span class="close-icon icon close-tag" nz-icon [nzType]="'ss:iconClose'" (click)="deleteTagUser(i)"></span>
            </div>
          </ng-container>
        </div>
      </div>

      <nz-form-item class="form-item-tpr">
        <nz-form-label class="field-tile" [nzSpan]="6">ТПР:</nz-form-label>
        <nz-form-control>
          <nz-select
            nzShowSearch
            nzServerSearch
            nzPlaceHolder="Укажите ТПР"
            [(ngModel)]="selectedTpr"
            [nzAllowClear]="true"
            [nzShowArrow]="true"
            (ngModelChange)="onTprChange()"
            (nzOnSearch)="searchTpr($event)"
            [ngModelOptions]="{ standalone: true }"
          >
            <nz-option *ngFor="let user of listTPR" [nzLabel]="user.name" [nzValue]="user.id"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <div class="tag-selected-name" *ngIf="tprSelectedTags">
        <div class="item-tag item-tag-selected" *ngFor="let tpr of tprSelectedTags; index as i">
          <a nzTooltipTitle="{{ tpr?.name }}" nz-tooltip>{{ tpr?.name | maxLengthText:20 }}</a>
          <span class="close-icon icon close-tag" nz-icon [nzType]="'ss:iconClose'" (click)="deleteTagTpr(i)"></span>
        </div>
      </div>

    </form>
    <ng-template #prefixUser>
      <i nz-icon nzType="user"></i>
    </ng-template>
  </div>

  <div class="footer-form">
    <div *nzModalFooter>
      <button nz-button nzType="default" (click)="handleCancel()" *ngIf="false">Отменить</button>
      <div class="send d-flex justify-content-center">
        <div class="">
          <button nz-button nzType="primary" class="login-form-button" (click)="handleOk()" [nzLoading]="isConfirmLoading">Добавить победу</button>
        </div>
      </div>
    </div>
  </div>
</div>
