# –ú–µ—Ç—Ä–∏–∫–∏ –∏ —Ç–µ—Å—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–æ—É—Ç–∏–Ω–≥–∞

## –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –º–µ—Ç—Ä–∏–∫–∏, —Ç–µ—Å—Ç—ã –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ä–æ—É—Ç–∏–Ω–≥–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ ERP SSNAB. –û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º.

## üéØ –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### 1. –ú–µ—Ç—Ä–∏–∫–∏ —Ä–∞–∑–º–µ—Ä–∞ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

#### –†–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞
- **–¢–µ–∫—É—â–∏–π —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞**: 4.00 MB (Raw), 706.15 kB (Gzipped)
- **–ì–ª–∞–≤–Ω—ã–π –±–∞–Ω–¥–ª**: 3.61 MB (657.42 kB gzipped)
- **–°—Ç–∏–ª–∏**: 354.34 kB (36.52 kB gzipped)
- **Polyfills**: 34.89 kB (11.36 kB gzipped)

#### –ú–µ—Ç—Ä–∏–∫–∏ —Ä–æ—É—Ç–∏–Ω–≥–∞
- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ app.routes.ts**: 362 —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ä–æ—É—Ç–æ–≤**: 56 –º–∞—Ä—à—Ä—É—Ç–æ–≤
- **–ì–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏**: –î–æ 4 —É—Ä–æ–≤–Ω–µ–π
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ layouts**: 4 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ guards**: 7+ –æ—Ö—Ä–∞–Ω–Ω–∏–∫–æ–≤ –º–∞—Ä—à—Ä—É—Ç–æ–≤

#### –°—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ feature –º–æ–¥—É–ª–µ–π**: 13 –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ API —Å–µ—Ä–≤–∏—Å–æ–≤**: 36+ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ core/api
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞—Å–∞–¥–æ–≤**: 24 —Ñ–∞—Å–∞–¥–∞
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ shared –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: 94+ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

### 2. –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏
- **–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏**: ~127-171 —Å–µ–∫—É–Ω–¥
- **–í—Ä–µ–º—è hot reload**: –ò–∑–º–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- **–í—Ä–µ–º—è –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞

#### Memory footprint
- **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏**: –¢—Ä–µ–±—É–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ runtime
- **Memory leaks**: –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–ø–∏—Å–∫–æ–π –æ—Ç Observable

### 3. –ú–µ—Ç—Ä–∏–∫–∏ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏

#### Coupling –º–µ—Ç—Ä–∏–∫–∏
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç core**: –í—Å–µ feature –º–æ–¥—É–ª–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç core
- **Circular dependencies**: –¢—Ä–µ–±—É–µ—Ç –∞–Ω–∞–ª–∏–∑–∞
- **Import count**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ –∫–∞–∂–¥–æ–º –º–æ–¥—É–ª–µ

## üîç –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### 1. Bundle Analysis

#### –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞
```bash
# –°–±–æ—Ä–∫–∞ —Å source maps
ng build --source-map

# –ê–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–∞–≤–∞ –±–∞–Ω–¥–ª–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ webpack-bundle-analyzer)
npx @angular-devkit/build-angular:extract-i18n --output-path dist/bundle-analysis

# –ü—Ä–æ—Å—Ç–æ–π –∞–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤
ls -la dist/erpss/ | grep -E '\.(js|css)$'
```

#### Bundle composition –∞–Ω–∞–ª–∏–∑
```bash
# –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ Angular CLI
ng build --stats-json
npx webpack-bundle-analyzer dist/erpss/stats.json
```

### 2. Code Analysis Tools

#### ESLint –º–µ—Ç—Ä–∏–∫–∏
```bash
# –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
npm run lint > lint-report.txt

# –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è —Ä–æ—É—Ç–∏–Ω–≥–∞
npx eslint src/app/app.routes.ts --format json > routing-lint.json
```

#### Circular dependencies
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ madge –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install -g madge
madge --circular --extensions ts src/app/
```

#### Code complexity
```bash
# –ê–Ω–∞–ª–∏–∑ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞
npx typescript-complexity-analyzer src/app/app.routes.ts
```

### 3. Custom Scripts –¥–ª—è –º–µ—Ç—Ä–∏–∫

#### –°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞
```typescript
// scripts/analyze-routing.ts
import * as fs from 'fs';
import * as path from 'path';

interface RoutingMetrics {
  totalRoutes: number;
  maxDepth: number;
  layoutsUsed: string[];
  guardsUsed: string[];
  lazyLoadedRoutes: number;
}

function analyzeRouting(): RoutingMetrics {
  const routesContent = fs.readFileSync('src/app/app.routes.ts', 'utf-8');
  
  // –ü–æ–¥—Å—á–µ—Ç –º–∞—Ä—à—Ä—É—Ç–æ–≤
  const routeMatches = routesContent.match(/path:\s*['"`][^'"`]*['"`]/g) || [];
  const totalRoutes = routeMatches.length;
  
  // –ê–Ω–∞–ª–∏–∑ –≥–ª—É–±–∏–Ω—ã –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
  const maxDepth = analyzeDepth(routesContent);
  
  // –ü–æ–∏—Å–∫ layouts
  const layoutMatches = routesContent.match(/component:\s*(\w+LayoutComponent)/g) || [];
  const layoutsUsed = [...new Set(layoutMatches.map(m => m.split(':')[1].trim()))];
  
  // –ü–æ–∏—Å–∫ guards
  const guardMatches = routesContent.match(/canActivate:\s*\[([^\]]+)\]/g) || [];
  const guardsUsed = [...new Set(guardMatches.flatMap(m => 
    m.match(/\w+Guard/g) || []
  ))];
  
  // –ü–æ–∏—Å–∫ lazy-loaded —Ä–æ—É—Ç–æ–≤
  const lazyMatches = routesContent.match(/loadChildren|loadComponent/g) || [];
  const lazyLoadedRoutes = lazyMatches.length;
  
  return {
    totalRoutes,
    maxDepth,
    layoutsUsed,
    guardsUsed,
    lazyLoadedRoutes
  };
}

function analyzeDepth(content: string): number {
  const lines = content.split('\n');
  let maxDepth = 0;
  let currentDepth = 0;
  
  for (const line of lines) {
    const openBraces = (line.match(/\{/g) || []).length;
    const closeBraces = (line.match(/\}/g) || []).length;
    currentDepth += openBraces - closeBraces;
    maxDepth = Math.max(maxDepth, currentDepth);
  }
  
  return maxDepth;
}

// –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
const metrics = analyzeRouting();
console.log('Routing Metrics:', JSON.stringify(metrics, null, 2));
```

#### –°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∞ bundle size
```typescript
// scripts/bundle-analysis.ts
import * as fs from 'fs';
import * as path from 'path';

interface BundleMetrics {
  mainBundleSize: number;
  stylesSize: number;
  polyfillsSize: number;
  totalSize: number;
  gzippedSizes: {
    main: number;
    styles: number;
    polyfills: number;
    total: number;
  };
}

function analyzeBundleSize(): BundleMetrics {
  const distPath = 'dist/erpss';
  
  if (!fs.existsSync(distPath)) {
    throw new Error('Build directory not found. Run ng build first.');
  }
  
  const files = fs.readdirSync(distPath);
  
  const mainFile = files.find(f => f.startsWith('main.') && f.endsWith('.js'));
  const stylesFile = files.find(f => f.startsWith('styles.') && f.endsWith('.css'));
  const polyfillsFile = files.find(f => f.startsWith('polyfills.') && f.endsWith('.js'));
  
  const mainBundleSize = mainFile ? getFileSize(path.join(distPath, mainFile)) : 0;
  const stylesSize = stylesFile ? getFileSize(path.join(distPath, stylesFile)) : 0;
  const polyfillsSize = polyfillsFile ? getFileSize(path.join(distPath, polyfillsFile)) : 0;
  
  return {
    mainBundleSize,
    stylesSize,
    polyfillsSize,
    totalSize: mainBundleSize + stylesSize + polyfillsSize,
    gzippedSizes: {
      main: Math.round(mainBundleSize * 0.18), // –ü—Ä–∏–º–µ—Ä–Ω–∞—è –∫–æ–º–ø—Ä–µ—Å—Å–∏—è
      styles: Math.round(stylesSize * 0.10),
      polyfills: Math.round(polyfillsSize * 0.33),
      total: Math.round((mainBundleSize + stylesSize + polyfillsSize) * 0.18)
    }
  };
}

function getFileSize(filePath: string): number {
  const stats = fs.statSync(filePath);
  return stats.size;
}

function formatBytes(bytes: number): string {
  if (bytes === 0) return '0 Bytes';
  const k = 1024;
  const sizes = ['Bytes', 'KB', 'MB', 'GB'];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
}

// –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
try {
  const metrics = analyzeBundleSize();
  console.log('Bundle Analysis:');
  console.log(`Main Bundle: ${formatBytes(metrics.mainBundleSize)} (${formatBytes(metrics.gzippedSizes.main)} gzipped)`);
  console.log(`Styles: ${formatBytes(metrics.stylesSize)} (${formatBytes(metrics.gzippedSizes.styles)} gzipped)`);
  console.log(`Polyfills: ${formatBytes(metrics.polyfillsSize)} (${formatBytes(metrics.gzippedSizes.polyfills)} gzipped)`);
  console.log(`Total: ${formatBytes(metrics.totalSize)} (${formatBytes(metrics.gzippedSizes.total)} gzipped)`);
} catch (error) {
  console.error('Error analyzing bundle:', error.message);
}
```

## üß™ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### 1. Unit —Ç–µ—Å—Ç—ã –¥–ª—è –º–µ—Ç—Ä–∏–∫

#### –¢–µ—Å—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞
```typescript
// tests/routing-metrics.spec.ts
import { routes } from '../src/app/app.routes';

describe('Routing Metrics', () => {
  it('should not exceed maximum route count threshold', () => {
    const flatRoutes = flattenRoutes(routes);
    expect(flatRoutes.length).toBeLessThan(100); // –ü–æ—Ä–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  });

  it('should not have excessive nesting depth', () => {
    const maxDepth = calculateMaxDepth(routes);
    expect(maxDepth).toBeLessThan(5); // –ú–∞–∫—Å–∏–º—É–º 4 —É—Ä–æ–≤–Ω—è –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏
  });

  it('should use lazy loading for large modules', () => {
    const lazyRoutes = findLazyRoutes(routes);
    expect(lazyRoutes.length).toBeGreaterThan(0);
  });

  it('should not have unused guards', () => {
    const allGuards = extractGuards(routes);
    const unusedGuards = findUnusedGuards(allGuards);
    expect(unusedGuards).toEqual([]);
  });
});

function flattenRoutes(routes: any[], depth = 0): any[] {
  let result = [];
  for (const route of routes) {
    result.push({ ...route, depth });
    if (route.children) {
      result = result.concat(flattenRoutes(route.children, depth + 1));
    }
  }
  return result;
}

function calculateMaxDepth(routes: any[], currentDepth = 0): number {
  let maxDepth = currentDepth;
  for (const route of routes) {
    if (route.children) {
      const childDepth = calculateMaxDepth(route.children, currentDepth + 1);
      maxDepth = Math.max(maxDepth, childDepth);
    }
  }
  return maxDepth;
}

function findLazyRoutes(routes: any[]): any[] {
  const lazyRoutes = [];
  for (const route of routes) {
    if (route.loadChildren || route.loadComponent) {
      lazyRoutes.push(route);
    }
    if (route.children) {
      lazyRoutes.push(...findLazyRoutes(route.children));
    }
  }
  return lazyRoutes;
}

function extractGuards(routes: any[]): string[] {
  const guards = new Set<string>();
  for (const route of routes) {
    if (route.canActivate) {
      route.canActivate.forEach(guard => guards.add(guard.name));
    }
    if (route.children) {
      extractGuards(route.children).forEach(guard => guards.add(guard));
    }
  }
  return Array.from(guards);
}

function findUnusedGuards(guards: string[]): string[] {
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∏—Å–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö guards
  // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å —Ñ–∞–π–ª–∞–º–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ guards
  return [];
}
```

### 2. Performance —Ç–µ—Å—Ç—ã

#### –¢–µ—Å—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏
```typescript
// tests/build-performance.spec.ts
import { exec } from 'child_process';
import { promisify } from 'util';

const execAsync = promisify(exec);

describe('Build Performance', () => {
  it('should build within acceptable time limit', async () => {
    const startTime = Date.now();
    
    try {
      await execAsync('ng build --configuration=development');
      const buildTime = Date.now() - startTime;
      
      // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏: 3 –º–∏–Ω—É—Ç—ã
      expect(buildTime).toBeLessThan(180000);
    } catch (error) {
      fail(`Build failed: ${error.message}`);
    }
  }, 300000); // –¢–∞–π–º–∞—É—Ç —Ç–µ—Å—Ç–∞: 5 –º–∏–Ω—É—Ç

  it('should not exceed bundle size limits', async () => {
    try {
      await execAsync('ng build --configuration=production');
      
      const bundleAnalysis = await analyzeBundleSize();
      
      // –õ–∏–º–∏—Ç—ã —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞
      expect(bundleAnalysis.mainBundleSize).toBeLessThan(4 * 1024 * 1024); // 4MB
      expect(bundleAnalysis.gzippedSizes.total).toBeLessThan(1024 * 1024); // 1MB gzipped
    } catch (error) {
      fail(`Bundle analysis failed: ${error.message}`);
    }
  }, 300000);
});

async function analyzeBundleSize() {
  // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞
  return {
    mainBundleSize: 0,
    gzippedSizes: { total: 0 }
  };
}
```

### 3. Integration —Ç–µ—Å—Ç—ã

#### –¢–µ—Å—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ —Ä–æ—É—Ç–∏–Ω–≥–∞
```typescript
// tests/routing-integration.spec.ts
import { TestBed } from '@angular/core/testing';
import { Router } from '@angular/router';
import { Location } from '@angular/common';
import { Component } from '@angular/core';
import { routes } from '../src/app/app.routes';

@Component({ template: '' })
class TestComponent { }

describe('Routing Integration', () => {
  let router: Router;
  let location: Location;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [RouterTestingModule.withRoutes(routes)],
      declarations: [TestComponent]
    }).compileComponents();

    router = TestBed.inject(Router);
    location = TestBed.inject(Location);
  });

  it('should navigate to all defined routes without errors', async () => {
    const allRoutes = extractAllPaths(routes);
    
    for (const routePath of allRoutes) {
      try {
        await router.navigate([routePath]);
        expect(location.path()).toBe(routePath);
      } catch (error) {
        fail(`Navigation to ${routePath} failed: ${error.message}`);
      }
    }
  });

  it('should apply correct guards to protected routes', async () => {
    const protectedRoutes = findProtectedRoutes(routes);
    
    for (const route of protectedRoutes) {
      // –¢–µ—Å—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è guards
      expect(route.canActivate).toBeDefined();
      expect(route.canActivate.length).toBeGreaterThan(0);
    }
  });

  it('should redirect correctly for invalid routes', async () => {
    await router.navigate(['/invalid-route']);
    expect(location.path()).toBe('/'); // –î–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é
  });
});

function extractAllPaths(routes: any[]): string[] {
  const paths = [];
  for (const route of routes) {
    if (route.path && route.path !== '**') {
      paths.push('/' + route.path);
    }
    if (route.children) {
      const childPaths = extractAllPaths(route.children);
      childPaths.forEach(childPath => {
        if (route.path) {
          paths.push('/' + route.path + childPath);
        }
      });
    }
  }
  return paths;
}

function findProtectedRoutes(routes: any[]): any[] {
  const protectedRoutes = [];
  for (const route of routes) {
    if (route.canActivate) {
      protectedRoutes.push(route);
    }
    if (route.children) {
      protectedRoutes.push(...findProtectedRoutes(route.children));
    }
  }
  return protectedRoutes;
}
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

### 1. CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### GitHub Actions workflow
```yaml
# .github/workflows/bundle-analysis.yml
name: Bundle Analysis

on:
  pull_request:
    branches: [main, dev]
  push:
    branches: [main, dev]

jobs:
  bundle-analysis:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: Install dependencies
      run: npm ci
    
    - name: Build application
      run: npm run build:prod
    
    - name: Analyze bundle size
      run: |
        echo "## Bundle Analysis" >> $GITHUB_STEP_SUMMARY
        ls -la dist/erpss/*.js dist/erpss/*.css | awk '{print "- " $9 ": " $5 " bytes"}' >> $GITHUB_STEP_SUMMARY
    
    - name: Check bundle size limits
      run: |
        MAIN_SIZE=$(stat -c%s dist/erpss/main.*.js)
        if [ $MAIN_SIZE -gt 4194304 ]; then
          echo "‚ùå Main bundle size exceeds 4MB limit: $MAIN_SIZE bytes"
          exit 1
        else
          echo "‚úÖ Main bundle size within limits: $MAIN_SIZE bytes"
        fi

  routing-analysis:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: Install dependencies
      run: npm ci
    
    - name: Analyze routing complexity
      run: |
        npx ts-node scripts/analyze-routing.ts > routing-metrics.json
        cat routing-metrics.json
    
    - name: Check routing thresholds
      run: |
        ROUTE_COUNT=$(cat routing-metrics.json | jq '.totalRoutes')
        if [ $ROUTE_COUNT -gt 100 ]; then
          echo "‚ùå Too many routes: $ROUTE_COUNT (limit: 100)"
          exit 1
        else
          echo "‚úÖ Route count within limits: $ROUTE_COUNT"
        fi
```

### 2. –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ—Ç—á–µ—Ç—ã

#### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –º–µ—Ç—Ä–∏–∫
```typescript
// scripts/weekly-metrics-report.ts
import * as fs from 'fs';

interface WeeklyMetrics {
  timestamp: string;
  bundleSize: {
    main: number;
    styles: number;
    total: number;
  };
  routingComplexity: {
    totalRoutes: number;
    maxDepth: number;
    lazyRoutes: number;
  };
  codeQuality: {
    lintIssues: number;
    testCoverage: number;
    duplicatedCode: number;
  };
}

async function generateWeeklyReport(): Promise<WeeklyMetrics> {
  const bundleMetrics = await analyzeBundleSize();
  const routingMetrics = await analyzeRouting();
  const qualityMetrics = await analyzeCodeQuality();
  
  const report: WeeklyMetrics = {
    timestamp: new Date().toISOString(),
    bundleSize: bundleMetrics,
    routingComplexity: routingMetrics,
    codeQuality: qualityMetrics
  };
  
  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
  const reportPath = `reports/weekly-${new Date().toISOString().split('T')[0]}.json`;
  fs.writeFileSync(reportPath, JSON.stringify(report, null, 2));
  
  // –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ Slack)
  await sendNotification(report);
  
  return report;
}

async function sendNotification(report: WeeklyMetrics) {
  const summary = `
üìä **Weekly Metrics Report**
üóìÔ∏è Date: ${report.timestamp}

üì¶ **Bundle Size**
- Main: ${formatBytes(report.bundleSize.main)}
- Total: ${formatBytes(report.bundleSize.total)}

üõ£Ô∏è **Routing Complexity**
- Total Routes: ${report.routingComplexity.totalRoutes}
- Max Depth: ${report.routingComplexity.maxDepth}
- Lazy Routes: ${report.routingComplexity.lazyRoutes}

‚ú® **Code Quality**
- Lint Issues: ${report.codeQuality.lintIssues}
- Test Coverage: ${report.codeQuality.testCoverage}%
- Code Duplication: ${report.codeQuality.duplicatedCode}%
  `;
  
  // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Slack, Teams –∏–ª–∏ email
  console.log(summary);
}
```

## üéØ –¶–µ–ª–∏ –∏ –ø–æ—Ä–æ–≥–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

### –¢–µ–∫—É—â–∏–µ –ø–æ—Ä–æ–≥–∏ (Baseline)
- **–†–∞–∑–º–µ—Ä main –±–∞–Ω–¥–ª–∞**: < 4 MB
- **Gzipped —Ä–∞–∑–º–µ—Ä**: < 1 MB
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤**: < 100
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏**: < 5
- **–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏**: < 3 –º–∏–Ω—É—Ç—ã
- **Memory leaks**: 0

### –¶–µ–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)
- **–†–∞–∑–º–µ—Ä main –±–∞–Ω–¥–ª–∞**: < 2 MB (—Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ 50%)
- **Gzipped —Ä–∞–∑–º–µ—Ä**: < 500 KB (—Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ 50%)
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ –≥–ª–∞–≤–Ω–æ–º —Ñ–∞–π–ª–µ**: < 20 (lazy loading)
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏**: < 3
- **–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏**: < 1 –º–∏–Ω—É—Ç—ã (—Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
- **Lazy-loaded –º–æ–¥—É–ª–µ–π**: > 80% –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ü–µ–ª–∏ (3 –º–µ—Å—è—Ü–∞)
- **–†–∞–∑–º–µ—Ä main –±–∞–Ω–¥–ª–∞**: < 3 MB (—Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ 25%)
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä—è–º—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ –≤ —Ä–æ—É—Ç–∏–Ω–≥–µ**: < 50
- **–ü–æ–∫—Ä—ã—Ç–∏–µ lazy loading**: > 50%
- **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ memory leaks**: 100%

## üöÄ –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### –§–∞–∑–∞ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (1-2 –Ω–µ–¥–µ–ª–∏)
1. ‚úÖ –í–Ω–µ–¥—Ä–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –º–µ—Ç—Ä–∏–∫
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD –ø—Ä–æ–≤–µ—Ä–∫–∏
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å baseline –º–µ—Ç—Ä–∏–∫
4. ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã

### –§–∞–∑–∞ 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (4-6 –Ω–µ–¥–µ–ª—å)
1. üîÑ –í–Ω–µ–¥—Ä–∏—Ç—å lazy loading –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –º–æ–¥—É–ª–µ–π
2. üîÑ –†–∞–∑–±–∏—Ç—å –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ä–æ—É—Ç–∏–Ω–≥ –Ω–∞ feature-based
3. üîÑ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞
4. üîÑ –ò—Å–ø—Ä–∞–≤–∏—Ç—å memory leaks

### –§–∞–∑–∞ 3: –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ (ongoing)
1. üîÑ –†–µ–≥—É–ª—è—Ä–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫
2. üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ PR
3. üîÑ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –∫–æ–º–∞–Ω–¥–µ
4. üîÑ –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

## üìã –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
```bash
# –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞
npm run analyze:full

# –ê–Ω–∞–ª–∏–∑ —Ç–æ–ª—å–∫–æ —Ä–æ—É—Ç–∏–Ω–≥–∞
npm run analyze:routing

# –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞
npm run analyze:bundle

# –ó–∞–ø—É—Å–∫ –º–µ—Ç—Ä–∏–∫ –≤ CI
npm run metrics:ci
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–æ–≤
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ—Ç—á–µ—Ç–∞
cat reports/latest-metrics.json

# –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–µ—Ç—Ä–∏–∫
npm run metrics:history

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π
npm run metrics:compare
```

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [–ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º](./architecture-analysis.md)
- [–ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](./basic-structure.md)
- [API —Ä–æ—É—Ç—ã](./api-routes.md)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã](./architectural-patterns.md)

---

*–î–æ–∫—É–º–µ–Ω—Ç –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫.*
